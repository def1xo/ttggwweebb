# Supplier automation MVP (free-first)

Этот MVP добавляет базовые блоки под вашу идею:

1. Анализ ссылок поставщиков (Google Sheets / HTML / MoySklad-like страницы).
2. Авто-маппинг названий товаров в категории (например, худи/зипки -> `Кофты`).
3. Выбор лучшего оффера поставщика по цвету/размеру и дроп-цене.
4. Оценка рыночной цены по списку цен с отбрасыванием мусора (`1₽`, `1_000_000₽`).

## Что уже есть в API

Admin endpoints:

- `POST /api/admin/supplier-intelligence/analyze-links`
- `POST /api/admin/supplier-intelligence/best-offer`
- `POST /api/admin/supplier-intelligence/estimate-market-price`

## Как подключать AI бесплатно

- **Без затрат**: rule-based (как в MVP) + регулярные выражения/словари.
- **Локально и бесплатно**: `Ollama` + open-weight модель (например, `qwen2.5:7b-instruct`) для генерации описаний.
- **Гибрид**: если LLM недоступна — fallback на шаблонные описания.

## Что делать следующим шагом

1. Добавить таблицу источников поставщиков в БД + UI в админке.
2. Добавить планировщик (Celery beat) для авто-синка по расписанию.
3. Интегрировать ingest Telegram-каналов поставщиков (с учётом уже существующего telethon importer).
4. Добавить модуль сбора рыночной цены по внешним источникам (Avito с legal-safe режимом и rate-limit).
5. Авто-генерация описания + dedupe по фото/названию.

## Важный момент про Avito

Публичного официального open API для массового бесплатного парсинга нет. Для устойчивой работы нужно:

- legal-safe сбор,
- ротация/ограничение запросов,
- фильтры по состоянию товара (только новые),
- отбрасывание мусорных значений.

В MVP уже заложен шаг 4 как отдельный модуль, чтобы можно было подключить без ломки текущей архитектуры.
